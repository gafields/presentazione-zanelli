<div class="neows-container">
  <app-page-header
    title="Near Earth Objects"
    description="Tracking asteroids and comets that pass close to Earth today, provided by NASA's Near Earth Object Web Service (NeoWs)."
  />

  @if (isLoading()) {
    <div class="loading-container">
      <mat-spinner diameter="48" />
      <p>Loading asteroid data...</p>
    </div>
  }

  @if (!isLoading() && asteroids().length > 0) {
    <div class="stats-bar">
      <div class="stat">
        <mat-icon>blur_on</mat-icon>
        <span class="stat-value">{{ asteroids().length }}</span>
        <span class="stat-label">Asteroids today</span>
      </div>
      <div class="stat">
        <mat-icon class="hazard-icon">warning</mat-icon>
        <span class="stat-value">{{ hazardousCount() }}</span>
        <span class="stat-label">Potentially hazardous</span>
      </div>
      <div class="stat stat--input">
        <input
          type="date"
          [ngModel]="date$()"
          (ngModelChange)="onDateChanged($event)"
          [max]="today"
        />
      </div>
    </div>

    <div class="asteroid-grid">
      @for (asteroid of asteroids(); track asteroid.id) {
        <app-asteroid-info [asteroid]="asteroid" />
      }
    </div>
  }
</div>
